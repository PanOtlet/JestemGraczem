{% extends 'base.html.twig' %}

{% block content %}
    <div>
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
                <a href="#jestemgraczem" aria-controls="home" role="tab" data-toggle="tab">Blog</a>
            </li>
            <li role="presentation">
                <a href="#23games" aria-controls="home" role="tab" data-toggle="tab">23Games</a>
            </li>
            <li role="presentation" class="dropdown">
                <a href="#" id="drop" class="dropdown-toggle"
                   data-toggle="dropdown" aria-controls="myTabDrop1-contents"
                   aria-expanded="false">Inne newsy <span class="caret"></span></a>
                <ul class="dropdown-menu" aria-labelledby="myTabDrop1" id="myTabDrop1-contents">
                    <li class="">
                        <a href="#cybersport" role="tab" data-toggle="tab" aria-controls="dropdown1">
                            CyberSport.pl
                        </a>
                    </li>
                </ul>
            </li>
        </ul>

        <div class="tab-content container">
            <div role="tabpanel" class="tab-pane fade row active in" id="jestemgraczem">
                <h3>Blog</h3>
            </div>
            <div role="tabpanel" class="tab-pane fade row" id="23games">
                <h3>23Games <span class="label label-danger">Sponsorowane</span></h3>
            </div>
            <div role="tabpanel" class="tab-pane fade row" id="cybersport">
                <img src="http://cybersport.pl/wp-content/themes/cybersport/assets/img/logo_cybersport.gif"
                     alt="Cybersport" class="img-responsive">
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('assets/js/jquery.rss.js') }}"></script>
    <script>

        var sites = [
            {
                name: "#jestemgraczem",
                url: "http://blog.jestemgraczem.pl/rss",
                css: "panel-info"
            },
            {
                name: "#23games",
                url: "https://23games.pl/feed",
                css: "panel-danger"
            },
            {
                name: "#cybersport",
                url: "http://cybersport.pl/feed",
                css: "panel-warning"
            }
        ];

        jQuery(function ($) {
            for (var i=0;i<sites.length;i++) {
                $(sites[i]['name']).rss(sites[i]['url'], {
                    limit: 12,
                    effect: 'slideFastSynced',
                    offsetStart: false,
                    offsetEnd: false,
                    ssl: false,
                    layoutTemplate: '{entries}',
                    entryTemplate: '' +
                    '<div class="panel '+sites[i]['css']+'">' +
                    '<div class="panel-heading">' +
                    '<h3 class="panel-title">{title} <small>{date}</small></h3>' +
                    '</div>' +
                    '<div class="panel-body">' +
                    '{shortBodyPlain}...' +
                    '<a href="{{ path('redirect') }}?url={url}" target="_blank">Czytaj dalej...</a>' +
                    '</div>' +
                    '</div>',
                    dateFormat: 'HH:mm D/MM/YYYY',
                });
            }
        });
    </script>
{% endblock %}
